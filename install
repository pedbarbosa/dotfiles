#!/bin/bash
verbose=false

#Include functions
source scripts/functions

while getopts ":hv" OPTION; do
    case $OPTION in
        h) usage; exit 0 ;;
        v) verbose=true ;;
    esac
done
shift $(( OPTIND - 1 ))

# OS detection
UNAME=$(uname -a | sed -E 's/ .*//')
if [[ $UNAME == 'Darwin' ]]; then
    run echo "Machine type is Mac..."
    sh scripts/mac
    if [[ $? -ne 0 ]]; then
        echo "Error while executing Mac installer, aborting..."
        exit 1
    fi
    ZSH_PATH="/usr/local/bin/zsh"
elif [[ $UNAME == 'Linux' ]]; then
    run echo "Machine type is Linux..."
    sh scripts/linux
    if [[ $? -ne 0 ]]; then
        echo "Error while executing Mac installer, aborting..."
        exit 1
    fi
    ZSH_PATH="/usr/bin/zsh"
else
    echo "Could not detect Operating System. Aborting."
    exit 1
fi

# Start OS agnostic configuration
sh scripts/agnostic
